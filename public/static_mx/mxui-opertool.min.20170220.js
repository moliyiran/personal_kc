$.browser={mozilla:false,webkit:false,opera:false,msie:false,ie8:false,ie7:false,safari:false,ios_safari:false,android:false,isMoveBrowser:false,scType:""};var opt_Agent=navigator.userAgent;$.browser.mozilla="MozAppearance"in document.documentElement.style;$.browser.webkit=!!opt_Agent.match(/AppleWebKit/i);$.browser.opera=/opera/.test(navigator.userAgent.toLowerCase());$.browser.msie=window.navigator.msPointerEnabled||document.all&&document.querySelector;$.browser.ie7=document.all&&!document.querySelector;$.browser.ie8=document.all&&!document.addEventListener&&$.browser.ie7!=true;$.browser.safari=!!opt_Agent.match(/Safari/i)&&!opt_Agent.match(/Chrome/i);$.browser.ios_safari=!!opt_Agent.match(/OS ([4-9])(_\d)+ like Mac OS X/i)&&!opt_Agent.match(/CriOS/i)||opt_Agent.indexOf("iPhone")>-1;$.browser.android=$.browser.safari&&!!opt_Agent.match(/Android/i)||opt_Agent.indexOf("Android")>-1||opt_Agent.indexOf("Linux")>-1;$.browser.isMoveBrowser=$.browser.android||$.browser.ios_safari;$.browser.isapp=!!opt_Agent.match(/iosapp/i);$.browser.useapp=false;$.browser.ispad=false;$.browser.set_scType=function(){var e=parseInt($(window).width());if(e>=1200){$.browser.scType="lg"}else if(e>=992){$.browser.scType="md"}else if(e>=768){$.browser.scType="sm"}else{$.browser.scType="xs"}$.browser.useapp=$.browser.isMoveBrowser||$.browser.isapp;$.browser.ispad=$.browser.useapp&&e>450};$.browser.set_scType();$.mx={};$.mx.global={};$.mx.global.NeedEndEditDG=null;$(function(){function e(e){var t=window.event?true:false;var i;var a;if(!e){return}if(t){i=e.keyCode;a=e}else{i=e.which;a=e}if(i==8){var n=a.target.getAttribute("type");if(n!="password"&&n!="text"&&n!="textarea"){return}if(t){if(document.activeElement.readOnly==undefined||document.activeElement.readOnly==true){if($(a.target).hasClass("wysiwyg-editor"))return;a.which=0;a.preventDefault();return event.returnValue=false}}else{if(document.activeElement.readOnly==undefined||document.activeElement.readOnly==true){if($(a.target).hasClass("wysiwyg-editor"))return;a.which=0;a.preventDefault()}}}if(i==13){var s=$(document.activeElement),r=s.parents("form:eq(0)"),o,d;if(s.is('[name="BarCode"]')){return false}o=r.find("input,select,textarea").filter(":visible");d=o.eq(o.index(document.activeElement)+1);if(d.length){d.focus()}else{o.eq(0).focus()}return false}}$(window).off("keydown.input").on("keydown.input",function(t){e(t)});var t=new Date;$(window).off("resize.page").on("resize.page",function(e){$.browser.set_scType();if($.browser.ie8!=true&&$.browser.ie7!=true){if($.browser.isMoveBrowser==true){var i=new Date;if(i.getTime()-t.getTime()<1e3){return}t=i}$(document).resize();try{exresize()}catch(e){}}});$(document).on("change.qjbj","input",function(e){$(this).val(i($(this).val()))});var i=function(e){var t="";for(var i=0;i<e.length;i++){if(e.charCodeAt(i)==12288){t+=String.fromCharCode(e.charCodeAt(i)-12256);continue}if(e.charCodeAt(i)>65280&&e.charCodeAt(i)<65375)t+=String.fromCharCode(e.charCodeAt(i)-65248);else t+=String.fromCharCode(e.charCodeAt(i))}return t};$(document).on("shown.bs.tab",'a[data-toggle="tab"]',function(e){if($(e.target).attr("href")){var t=$($(e.target).attr("href"));t.resize()}});if($.browser.useapp){$(document).off("click.mx.dropdown").on("click.mx.dropdown","li.mxtb-dropdown",function(e){e.stopPropagation();e.preventDefault()})}$(document).off("mousemove.lockscreen").on("mousemove.lockscreen",function(){if(window.parent&&window.parent.lockscreen_waitTime!=undefined){window.parent.lockscreen_waitTime=0}if(typeof variableName!="undefined"){lockscreen_waitTime=0}});$(document).off("mousedown.hidedropdown").on("mousedown.hidedropdown",function(e){if($($(e.target).parents("ul")).hasClass("nav-pills")==false){$($(parent.document).find("div.RMclickmenu")).css({display:"none"})}if($(e.target).closest("div").hasClass("RMclickmenu")==false){$(document).find("div.RMclickmenu").css({display:"none"})}if(window.frames.length!=parent.frames.length){$(parent.document).find(".dropdown-menu").each(function(){$(this).closest(".open").removeClass("open")})}})});var new_resize=function(){$("body").resize()};$.fn.resize=function(){$(".easyui_dg",this).each(function(){var e=$(this);e.datagrid("resize")});$(".bs_dialog.open",this).each(function(){$(this).bs_dialog("resize")})};$.fn.destroy=function(){this.each(function(){$(this).remove();{this.outerHTML=""}})};$.fn.iFrameClear=function(){var e=this[0];var t=e.contentWindow;if(e){e.src="about:blank";try{t.document.clear();this.remove()}catch(i){}}};$.fn.showPageLoading=function(e){this.find("div.div-page-mask-msg").remove();this.find("div.div-page-mask").remove();msg="";var t=this;if(e){t=document}var i=$(t).width();var a=$(t).height();var n=0;var s=0;if($(this).css("position")!="absolute"){n=$(this).offset().left;s=$(this).offset().top}$('<div class="div-page-mask"></div>').css({display:"block",left:n,top:s,width:i,height:a}).appendTo(this);$('<div class="div-page-mask-msg"></div>').html(msg).appendTo(this).css({display:"block",left:(i-$("div.div-page-mask-msg",this).outerWidth())/2+n,top:(a-$("div.div-page-mask-msg",this).outerHeight())/2+s})};$.fn.hidePageLoading=function(){this.find("div.div-page-mask-msg").remove();this.find("div.div-page-mask").remove()};$.fn.showLoading=function(e){if(window.frames.length!=parent.frames.length){if($(parent.document).find("div.widget-box-overlay").length>0){return}}$(this).find(">div.widget-box-overlay").remove();var t='<div class="widget-box-overlay"><button type="button" class="close"  >×</button><span class="loading-icon"></span></div>';$(this).append(t);$(this).find("div.widget-box-overlay .close").on("click",function(e){var t=$(this);t.closest("div.widget-box-overlay").remove()})};$.fn.hideLoading=function(){$(this).find(">div>i.fa-spin").html("");var e=this;$(e).find(">div.widget-box-overlay").remove()};String.prototype.padLeft=function(e,t){if(this.length>=e||(t==undefined||t.length==0))return this;else{left="";while(left.length<e-this.length)left+=t.toString();return left.toString()+this}};String.prototype.padRight=function(e,t){if(this.length>=e||(t==undefined||t.length==0))return this;else{right="";while(right.length<e-this.length)right+=t.toString();return this+right.toString()}};function fpercent(e){if(!e){return"0.00%"}if(typeof e=="string"){e=parseFloat(e)}if(isNaN(e)){return"0.00%"}if(e==0){return"0.00%"}else{return fmoney(e*100,2)+"%"}}function fpercentNoC(e){if(!e){return""}return e.toString()+"%"}function fmoney(e,a){var n="";if(e<0){n="-";e=e*-1}a=a>0&&a<=20?a:2;e=parseFloat((e+"").replace(/[^\d\.-]/g,"")).toFixed(a)+"";var s=e.split(".")[0].split("").reverse(),r=e.split(".")[1];t="";for(i=0;i<s.length;i++){t+=s[i]+((i+1)%3==0&&i+1!=s.length?",":"")}return n+t.split("").reverse().join("")+"."+r}function formatMoney_Digit(e,t){if(!e){if(e!=0){return""}}if(typeof e=="string"){e=parseFloat(e)}if(isNaN(e)){return""}else{return fmoney(e,t)}}function formatMoneyWithOutZero_Digit(e,t){if(!e){return""}if(e==0){return""}if(typeof e=="string"){e=parseFloat(e)}if(isNaN(e)){return""}else{return fmoney(e,t)}}function formatMoneyWithZero_Digit(e,t){if(!e){e=0}if(typeof e=="string"){e=parseFloat(e)}if(isNaN(e)){e=0}return fmoney(e,t)}function formatMoney(e){return formatMoney_Digit(e,2)}function formatMoneyWithOutZero(e){return formatMoneyWithOutZero_Digit(e,2)}function formatMoneyWithZero(e){return formatMoneyWithZero_Digit(e,2)}function formatWithOutZero(e){if(!e){return""}if(typeof e=="string"){e=parseInt(e)}if(e==0){return""}else{return e}}function formatBool(e){return e==true?"是":"否"}function formatState(e){return e==true?"启用":"停用"}function formatDateTime(e){if(e){if(typeof e=="string"){if(e.indexOf("/Date")==0){e=parseInt(e.replace("/Date(","").replace(")",""))}else{e=e.replace(/[-]/g,"/")}e=new Date(e)}return e.format("yyyy-MM-dd HH:mm:ss")}else{return""}}function formatDateYM(e){if(e){if(typeof e=="string"){if(e.indexOf("/Date")==0){e=parseInt(e.replace("/Date(","").replace(")",""))}else{e=e.replace(/[-]/g,"/")}e=new Date(e)}return e.format("yyyy-MM")}else{return""}}function formatDate(e){if(e){if(typeof e=="string"){if(e.indexOf("/Date")==0){e=parseInt(e.replace("/Date(","").replace(")",""))}else{e=e.replace(/[-]/g,"/")}e=new Date(e)}return e.format("yyyy-MM-dd")}else{return""}}function formatBillCode(e){if(e==null)return"";return"<a href='javascript:SwitchView();' style='color:blue'>"+e+"</a>"}function StringToJson(str){if(!str.indexOf){str.indexOf=function(e){var t=this.length>>>0;var i=Number(arguments[1])||0;i=i<0?Math.ceil(i):Math.floor(i);if(i<0)i+=t;for(;i<t;i++){if(i in this&&this[i]===e)return i}return-1}}if(str.indexOf("[")+str.indexOf("{")>-2){return eval("("+str+")")}return[]}function jsonToString(e){var t=this;switch(typeof e){case"string":return'"'+e.replace(/(["\\])/g,"\\$1")+'"';case"array":return"["+e.map(t.jsonToString).join(",")+"]";case"object":if(e instanceof Array){var i=[];var a=e.length;for(var n=0;n<a;n++){i.push(t.jsonToString(e[n]))}return"["+i.join(",")+"]"}else if(e==null){return"null"}else{var s=[];for(var r in e)s.push(t.jsonToString(r)+":"+t.jsonToString(e[r]=="undefined"?"":e[r]));return"{"+s.join(",")+"}"}case"number":return e;case"boolean":if(e){return true}else{return false};case"function":return'"'+getFnName(e)+'"';case false:return e}}$.fn.serializeObject=function(){var e={};var t=this.serializeArray();$.each(t,function(){if(e[this.name]){if(!e[this.name].push){e[this.name]=[e[this.name]]}e[this.name].push(this.value||"")}else{e[this.name]=this.value||""}});return e};var getFnName=function(e){var t=e.toString().replace(/[\s\?]*/g,""),i=t.length>=50?50:t.length;t=t.substring(0,i);var a=t.match(/^function([^\(]+?)\(/);if(a&&a[1]){return a[1]}var n=e.caller;if(n==null){return"anonymous"}_caller=n.toString().replace(/[\s\?]*/g,"");var s=_caller.indexOf(t),r=_caller.substring(s-30,s);a=r.match(/var([^\=]+?)\=/);if(a&&a[1]){return a[1]}return"anonymous"};function ReCorventColumnFormatter(columns){if(!columns){return}for(var i=0;i<columns.length;i++){var column=columns[i];for(var j=0;j<column.length;j++){var cColumn=column[j];if(cColumn.formatter!=""){cColumn.formatter=eval(cColumn.formatter)}}}}$.messager={alert:function(e,t,i,a,n){var s=n?" btn-danger ":" btn-success ";$("body").find("div.messager-popup").remove();var r=$('	<div class="custom-popup width-100 messager-popup" ><div style="padding:20px;0px;" class="content"></div><div class="text-center"><button  class="btn'+s+'btn-no-border btn-lg message-yes" style="margin-right:20px;">确定</button></div></div>').appendTo("body");var o=$.type(t);if(o=="string"){r.find("div.content").html("<h4>"+t+"</h4>")}if(o=="array"){var d=$('<ul class="list-unstyled spaced"></ul>').appendTo(r.find("div.content"));$.each(t,function(e,t){d.append("<li>"+t+"</li>")})}$(document).off("keydown.messager").on("keydown.messager",function(e){var t=window.event?true:false;var i;var a;if(t){i=e.keyCode;a=e}else{i=e.which;a=e}if(i==13||i==27){r.popup("hide")}});r.find("button.message-yes").on("click",function(){r.popup("hide")});r.popup({transition:"all 0.3s",autoopen:true,onclose:function(){$(document).off(".messager");if(a&&$.isFunction(a)){a.call(this)}}})},confirm:function(e,t,i,a){$("body").find("div.messager-popup").remove();var n={btnY:a?" btn-success ":" btn-danger ",btnN:a?" btn-danger ":" btn-success "};var s=$('	<div class="custom-popup width-100 messager-popup" data-value="0"><div style="padding:20px;0px;" class="content"></div><div class="text-center"><button  class="btn '+n.btnY+' btn-no-border btn-lg message-yes" style="margin-right:20px;">确定</button><button class="btn '+n.btnN+' btn-no-border btn-lg message-close">取消</button></div></div>').appendTo("body");var r=$.type(t);if(r=="string"){s.find("div.content").html("<h4>"+t+"</h4>")}if(r=="array"){var o=$('<ul class="list-unstyled spaced"></ul>').appendTo(s.find("div.content"));$.each(t,function(e,t){o.append("<li>"+t+"</li>")})}$(document).off("keydown.messager").on("keydown.messager",function(e){var t=window.event?true:false;var i;var a;if(t){i=e.keyCode;a=e}else{i=e.which;a=e}if(i==13){if(s.css("visibility")=="hidden"){return}s.attr("data-value","1");s.popup("hide")}if(i==27){if(s.css("visibility")=="hidden"){return}s.popup("hide")}});s.find("button.message-yes").on("click",function(){s.attr("data-value","1");s.popup("hide")});s.find("button.message-close").on("click",function(){s.popup("hide")});s.popup({transition:"all 0.3s",autoopen:true,onclose:function(){$(document).off(".messager");if(i&&$.isFunction(i)){var e=s.attr("data-value");if(e=="1"){i.call(this,true)}else{i.call(this,false)}}}})},showinfo:function(e){var t=$("body").find("div.messager-popup.showinfo");if(t.length<=0){t=$('	<div class="custom-popup width-100 messager-popup showinfo" ><div style="padding:20px;0px;" class="content"><ul class="list-unstyled spaced"></ul></div><div class="text-center"><button  class="btn btn-success btn-no-border btn-lg message-yes hidden" style="margin-right:20px;">确定</button></div></div>').appendTo("body");t.popup({transition:"all 0.3s",autoopen:true,onclose:function(){$("body").find("div.messager-popup.showinfo").remove()}})}var i=$.type(e);if(i=="string"){e=[e]}var a=t.find("div.content>ul");$.each(e,function(e,t){a.append("<li>"+t+"</li>")})},showinfo_over:function(e){var t=$("body").find("div.messager-popup.showinfo");if(t.length<=0){return}var i=t.find("button.message-yes");if(i.length<=0){return}i.removeClass("hidden");i.on("click",function(){t.popup("hide");if(e&&$.isFunction(e)){e.call(this)}})}};$.fn.drawformcard=function(e){var t=$(this).height();var i="";var a="";var n="";if(e==1){i="col-lg-12 col-sm-12 col-xs-12";a="col-xs-6 col-sm-4 col-md-3 col-lg-3";n="col-xs-12 col-sm-8 col-md-8 col-lg-8"}else if(e==2){i="col-lg-6 col-md-6 col-sm-6 col-xs-12";a="col-xs-6 col-sm-4 col-md-3 col-lg-3";n="col-xs-12 col-sm-8 col-md-9 col-lg-9"}else if(e==3){i="col-lg-4 col-md-4 col-sm-6 col-xs-12";a="col-xs-6 col-sm-4 col-md-3 col-lg-4";n="col-xs-12 col-sm-8 col-md-9 col-lg-8"}$(this).find("div.form-group").each(function(){if($(this).attr("data-noUserDraw")=="true")return;var t=$(this).data("colspan");var s="";var r="";$(this).removeCloClass();if(!t){$(this).addClass(i);s=a;r=n}else if(t=="2"){if(e==2){$(this).addClass("col-lg-12 col-md-12 col-sm-12 col-xs-12");s="col-xs-6 col-sm-2 col-md-2 col-lg-1";r="col-xs-12 col-sm-10 col-md-10 col-lg-11"}else if(e==3){$(this).addClass("col-lg-8 col-md-8 col-sm-12 col-xs-12");s="col-xs-6 col-sm-2 col-md-2 col-lg-2";r="col-xs-12 col-sm-10 col-md-10 col-lg-10"}}else if(t=="3"){$(this).addClass("col-lg-12 col-md-12 col-sm-12 col-xs-12");s="col-xs-6 col-sm-2 col-md-2 col-lg-1";r="col-xs-12 col-sm-10 col-md-10 col-lg-10"}else{$(this).addClass(i)}if(!$(this).hasClass("fc-group")){$(this).find(">label").addClass("control-label mx-group-title");$(this).find(">div").addClass("mx-group-control").height(33);$(this).find(">div>input").addClass("width-100 mx-input-group").outerHeight(33);$(this).find(">div>select").addClass("width-100").outerHeight(33)}});$(this).resize()};$.fn.removeCloClass=function(){var e=$(this);var t=e.attr("class");var i=t.split(" ");$.each(i,function(t,i){var a=i.substring(0,4);if(a=="col-"){e.removeClass(i)}})};$.fn.setValuesWhenSubmit=function(){$(this).find(".combo-f[comboname]").each(function(e,t){var i=$(this).attr("comboname");if(!(i==undefined||i=="")){if($(this).combo("options").editable==true){var a=$(this).combo("getValue");if(a==null||a==undefined){a=$(this).combo("getText")}var n=$(this).next("span.combo").children('input:hidden.combo-value[name="'+i+'"]');if(n.length<=0){n=$('<input name="'+i+'" class="combo-value" type="hidden" value=""/>').appendTo($(this).next("span.combo"));n.val(a)}else{n.val(a)}}}})};$.fn.putdata=function(e){if(e==null){return}$(this).find(":checkbox[name]").each(function(){if(e[this.name]!=undefined){if(e[this.name]){$(this).prop("checked",true);$(this).val(true)}else{$(this).prop("checked",false);$(this).val(false)}}$(this).click(function(){$(this).val($(this).prop("checked"))})});$(this).find(":radio[name]").each(function(){if(e[this.name]!=undefined){if(e[this.name]==$(this).val()){$(this).prop("checked",true)}else{$(this).prop("checked",false)}}else{$(this).prop("checked",false)}});$(this).find(":text[name],input[type='hidden'],:password[name],textarea[name],select[name]").each(function(){if(this.name==="formStatus"){return}if(e[this.name]!=undefined&&e[this.name]!="00000000-0000-0000-0000-000000000000"){$(this).val(e[this.name])}else{$(this).val("")}});$(this).find("a[name],label[name]").each(function(){if(e[$(this).attr("name")]!=undefined){$(this).text(e[$(this).attr("name")])}else{$(this).text("")}});$(this).find("div[name]").each(function(){if(e[$(this).attr("name")]!=undefined){$(this).empty();$(this).append(e[$(this).attr("name")])}else{$(this).empty()}});$(this).find("input[comboName].combobox-f,select[comboName].combobox-f").each(function(){if(e[$(this).attr("comboName")]!=undefined&&e[$(this).attr("comboName")]!="00000000-0000-0000-0000-000000000000"){if($(this).combobox("options").multiple==true){var t=e[$(this).attr("comboName")].split("、");$(this).combobox("setValues",t)}else{$(this).combobox("setValue",e[$(this).attr("comboName")])}}else{$(this).combobox("setValue","");$(this).combobox("setText","")}});$(this).find("input[comboName].combotree-f").each(function(){if(e[$(this).attr("comboName")]!=undefined&&e[$(this).attr("comboName")]!="00000000-0000-0000-0000-000000000000"){$(this).combotree("setValue",e[$(this).attr("comboName")])}else{$(this).combo("setValue","");$(this).combo("setText","")}});$(this).find("input[numberboxname].numberbox-f").each(function(){if(e[$(this).attr("numberboxname")]!=undefined){$(this).numberbox("setValue",e[$(this).attr("numberboxname")])}});$(this).find("input[mxcalcname].mxcalc-f").each(function(){var t=e[$(this).attr("mxcalcname")];if(!!t){$(this).mxcalc("setText",t);$(this).mxcalc("setValue",t)}else{$(this).mxcalc("setText",0);$(this).mxcalc("setValue",0)}});$(this).find("input[name].mxdate-f").each(function(){var t=e[$(this).attr("name")];if(!!t){$(this).mxdate("setValue",t)}else{$(this).mxdate("setValue","")}});$(this).find("input[comboName].datebox-f").each(function(){if(e[$(this).attr("comboName")]!=undefined){$(this).datebox("setValue",formatDate(e[$(this).attr("comboName")]))}});$(this).find("input[comboName].datetimebox-f").each(function(){if(e[$(this).attr("comboName")]!=undefined){$(this).datetimebox("setValue",e[$(this).attr("comboName")])}});$(this).find("input[reftextName].reftext-f").each(function(){if($(this).attr("textName")){var t=$(this).attr("reftextName");var i=$(this).attr("textName");{$(this).reftext("SetValue",e[t])}{$(this).reftext("SetText",e[i])}}else{if(e[$(this).attr("reftextName")]!=undefined){$(this).reftext("SetItem",e[$(this).attr("reftextName")])}else{$(this).reftext("SetItem",null)}}})};$.fn.setuibystate=function(e){if($(this).find(":hidden[name='formStatus']").length<=0){$(this).append('<input  name="formStatus" type="hidden" />')}$(this).find(":hidden[name='formStatus']").val(e);$(this).find(":text:not(.reftext-text):not(.combo-text),:password,textarea").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).attr("readonly","readonly")}else{$(this).removeAttr("readonly")}});$(this).find(":checkbox,:radio,select").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).attr("disabled","disabled")}else{$(this).removeAttr("disabled")}});$(this).find("input[comboName].combobox-f,select[comboName].combobox-f").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).combobox("disable")}else{$(this).combobox("enable")}});$(this).find("input[comboName].combotree-f").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).combotree("disable")}else{$(this).combotree("enable")}});$(this).find("input[comboName].datebox-f").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).datebox("disable")}else{$(this).datebox("enable")}});$(this).find("input[comboName].datetimebox-f").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).datetimebox("disable")}else{$(this).datetimebox("enable")}});$(this).find("input[reftextName].reftext-f").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).reftext("disable")}else{$(this).reftext("enable")}});$(this).find("input[mxcalcName].mxcalc-f").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).mxcalc("disable")}else{$(this).mxcalc("enable")}});$(this).find("input.mxdate-f").each(function(){var t=e=="read"?false:true;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("readedit")!=-1){t=true};break;case"edit":if(i.indexOf("editdis")!=-1){t=false};break;case"add":if(i.indexOf("adddis")!=-1){t=false};break;default:break}if(!t){$(this).mxdate("disable")}else{$(this).mxdate("enable")}});$(this).find("[settag]").each(function(){var t=$(this).attr("settag");var i=false;switch(e){case"read":if(t.indexOf("readhide")!=-1){i=true};break;case"edit":if(t.indexOf("edithide")!=-1){i=true};break;case"add":if(t.indexOf("addhide")!=-1){i=true};break;default:break}if(i){$(this).hide()}else{$(this).show()}})};$.fn.settbuibystate=function(e){$(this).find("[settag].btn").each(function(){var t=false;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("read")!=-1){t=true}else{t=false};break;case"edit":if(i.indexOf("edit")!=-1||i.indexOf("modify")!=-1){t=true}else{t=false};break;case"add":if(i.indexOf("add")!=-1||i.indexOf("modify")!=-1){t=true}else{t=false};break;default:break}if(!t){$(this).addClass("disabled")}else{$(this).removeClass("disabled")}});if($.smallscreen.dh){$.smallscreen.dh.find("li[settag]").each(function(){var t=false;var i="";if($(this).attr("settag")){i=$(this).attr("settag")}switch(e){case"read":if(i.indexOf("read")!=-1){t=true}else{t=false};break;case"edit":if(i.indexOf("edit")!=-1||i.indexOf("modify")!=-1){t=true}else{t=false};break;case"add":if(i.indexOf("add")!=-1||i.indexOf("modify")!=-1){t=true}else{t=false};break;default:break}if(!t){$(this).addClass("hidden")}else{$(this).removeClass("hidden")}})}};$.fn.setuibyauth=function(e){if(!e.IsSearchAuth){$(this).find("*").css({display:"none"});$(this).append("<b>您无权限查看此页面!</b>");return}$(this).find("[authtag]").addClass("hidden auth-hidden");$(this).find("[authtag='']").removeClass("hidden");if(e.IsAddAuth){$(this).find('[authtag*="IsAddAuth"]:hidden').removeClass("hidden")}if(e.IsModifyAuth){$(this).find('[authtag*="IsModifyAuth"]:hidden').removeClass("hidden")}if(e.IsDeleteAuth){$(this).find('[authtag*="IsDeleteAuth"]:hidden').removeClass("hidden")}if(e.IsPrintAuth){$(this).find('[authtag*="IsPrintAuth"]:hidden').removeClass("hidden")}if(e.IsExportAuth){$(this).find('[authtag*="IsExportAuth"]:hidden').removeClass("hidden")}if(e.IsVerifyAuth){$(this).find('[authtag*="IsVerifyAuth"]:hidden').removeClass("hidden")}if(e.IsVoidAuth){$(this).find('[authtag*="IsVoidAuth"]:hidden').removeClass("hidden")}var t=this;if(e.OtherAuth){$.each(e.OtherAuth,function(e,i){$(t).find('[authtag*="'+i+'"]:hidden').removeClass("hidden")})}$(this).find("[authtag].hidden.auth-hidden").remove()};$.fn.inputInit=function(e){if(e==null){return}$(this).find("input[name]:not([type]),input[name][type='text']").each(function(t,i){e.call(i)})};$.fn.getCursorPosition=function(){var e=-1;var t=$(this)[0];if(t.selectionStart){e=t.selectionStart}return e};$.quickAdd={};$.quickAdd.currentConfig=null;$.fn.initQuickAdd=function(e){if(!e){return}$.each(e,function(e,t){var i=$(t.selector);if(i.length<=0){return true}switch(t.cType){case 1:if(!i.is("select")){return true}i.combobox({editable:false});var a=i.combobox("panel");var n=$("<div  style='margin-top:2px;'><button class='btn btn-info btn-block' style='border: 0px currentColor; border-image: none;'><i class='ace-icon fa fa-plus bigger-120'></i>"+t.title+"</button></div>").insertAfter(a).find(">button.btn").on("click",function(e){i.combobox("hidePanel");showQuickAdd(t)});break;case 2:if(!i.hasClass("combobox-f")){return true}var a=i.combobox("panel");var n=$("<div  style='margin-top:2px;'><button class='btn btn-info btn-block' style='border: 0px currentColor; border-image: none;'><i class='ace-icon fa fa-plus bigger-120'></i>"+t.title+"</button></div>").insertAfter(a).find(">button.btn").on("click",function(e){i.combobox("hidePanel");showQuickAdd(t)});break;case 9:if(!i.hasClass("reftext-f")){return true}t.quickClick=function(){showQuickAdd(this)};i.reftext({qa_config:t});break;default:}})};var clearQuickAdd=function(){var e=$("#div_QuickAdd");if(e.length<=0){return}var t=e.find(">iframe");e.addClass("hidden");t.iFrameClear()};var showQuickAdd=function(e){if($("#div_QuickAdd").length>0){$("#div_QuickAdd").remove()}$.quickAdd.currentConfig=e;var t=$('<div id="div_QuickAdd" class="modal fade in" style="display:block"><iframe class="hidden"  src="'+e.url+'" frameborder="0" style="width: 100%;background-color:transparent" objid="'+e.objid+'"></iframe></div>').appendTo("body");var i=t.find(">iframe");i.outerHeight(t.outerHeight());t.showLoading("正在加载页面...");i.off("load.page").on("load.page",function(){setTimeout(function(){t.hideLoading();i.removeClass("hidden")},100)})};var completeQuickAdd=function(e){var t=$.quickAdd.currentConfig;if(!t){return}var i=$(t.selector);if(i.length<=0){return true}if(t.cType==9){i.reftext("showRefDialog")}t.onAddSuccess.call(i[0],e)};function DataOutExcel(e,t,i,a,n){if($("#OutExcel").length<=0){$("body").append('<form id="OutExcel" style="display: none" method="post"> <input id="frozenColumns" name="frozenColumns" type="hidden" /><input id="columns" name="columns" type="hidden" /><input id="condition" name="condition" type="hidden" /><input id="otherTag" name="otherTag" type="hidden" /><input id="isbody" name="isbody" type="hidden" /></form>')}var s=$("#OutExcel");s.form({success:function(e){if(!e){return}$.messager.alert("",e)}});s.attr("action",t);var r=$(e).datagrid("options");var o=r.excel_frozenColumns;var d=r.excel_columns;if(o==undefined){o=r.frozenColumns}if(d==undefined){d=r.columns}var f=0;if(o!=null){f=o.length}var l=0;if(d!=null){l=d.length}if(f+l==0){$.messager.alert("","没有任何可输入数据!");return}s.find("#frozenColumns").val(jsonToString(o));s.find("#columns").val(jsonToString(d));s.find("#condition").val(i);s.find("#otherTag").val(a);s.find("#isbody").val(n);s.submit()}(function(){String.prototype.startsWith=function(e){return this.indexOf(e)==0};String.prototype.autoAddEllipsis=function(t){var i=e(this,t);var a=i.cutflag;var n=i.cutstring;if("1"==a){return n+"..."}else{return n}};function e(e,i){var a=e.length;var n;var s;var r="1";var o=0;var d=false;if(a<=i/2){s=e;d=true}if(!d){for(var f=0;f<a;f++){if(t(e.charAt(f))){o+=2}else{o+=1}if(o>i){s=e.substring(0,f);d=true;break}else if(o==i){s=e.substring(0,f+1);d=true;break}}}if(!d){s=e;d=true}if(s.length==a){r="0"}return{cutstring:s,cutflag:r}}function t(e){for(var t=0;t<e.strLen;t++){if(e.charCodeAt(t)>128){return true}else{return false}}}Number.prototype.round=function(e){return Math.round(this*Math.pow(10,e))/Math.pow(10,e)};Array.prototype.remove=function(e){var t=-1;for(var i=0,a=this.length;i<a;i++){if(this[i]==e){t=i;break}}if(t!=-1){this.splice(t,1)}};Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(e))e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length));for(var i in t)if(new RegExp("("+i+")").test(e))e=e.replace(RegExp.$1,RegExp.$1.length==1?t[i]:("00"+t[i]).substr((""+t[i]).length));return e}})(jQuery);var GetUrlDataByName=function(e){var t=page_href.split(e+"=");if(t.length==1)return null;var i=t[1];if(i.indexOf("&")==0||i=="")return null;var a=i.split("&")[0];a=decodeURI(a);if(!a)return null;return a};